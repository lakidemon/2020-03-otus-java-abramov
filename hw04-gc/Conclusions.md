# Сравнение сборщиков мусора Java
## Условия тестирования
Объём нагрузок подбирался под каждый объём кучи отдельно так, чтобы время выполнения было близко к 5 минутам.
Информация о сборках и времени работы записывалась в csv файл.
#### Система:
* Windows 10 1909
* OpenJDK 11.0.6+8-b520.43
* CPU: AMD Ryzen 1600X 6C/12T
* RAM: 16GB

#### Параметры JVM:

     -Xmx256M || -Xmx4G
     -Xms256M || -Xms4G
     -XX:+UseSerialGC || -XX:+UseParallelGC  || -XX:+UseG1GC
     -XX:+ExitOnOutOfMemoryError

------------
## Обобщённые результаты запусков
|                                    |    G1          |                |    Parallel       |                 |    Serial       |                 |
|------------------------------------|----------------|----------------|-------------------|-----------------|-----------------|-----------------|
|    **Значение Xmx**                |    **256M**    |    **4G**      |    **256M**       |    **4G**       |    **256M**     |    **4G**       |
|    **Время выполнения, сек.**      |    327         |    316         |    305            |    328          |    325          |    389          |
|    **Итераций за 5 минут**         |    2998        |    2991        |    3004           |    2945         |    2993         |    2896         |
|    **Minor сборки, мин. мсек.**    |    1           |    2           |    8              |    78           |    30           |    437          |
|    **Minor сборки, макс. мсек.**   |    22          |    103         |    19             |    184          |    64           |    1052         |
|    **Major сборки, мин. мсек.**    |    32          |    303         |    23             |    447          |    93           |    1427         |
|    **Major сборки, макс. мсек.**   |    42          |    529         |    89             |    1106         |    193          |    3933         |
|    **Общее время STW, сек.**       |    0,505       |    9,185       |    1,773          |    20,764       |    5,687        |    64,781       |
|    **Доля времени STW, %**         |    0,15%       |    2,91%       |    0,58%          |    6,33%        |    1,75%        |    16,65%       |

## Выводы
G1 GC можно считать оптимальным сборщиком для среднестатистического приложения среди представленных~~, если пропускная способность не в приоритете~~.
Периодические малые сборки позволяют избегать долгих остановок приложения, хотя по мере разрастания кучи на сборки уходит всё больше ресурсов процессора.

Serial GC проводит сборки намного реже G1, хоть и дольше, но зато по минимуму нагружая процессор.
Сейчас этот сборщик подойдёт только для каких-то специфических кейсов, либо при работе на маломощном оборудовании, где распараллеливание процессов сборки приведёт только к ухудшению производительности. 

Parallel GC по поведению выглядит как Serial, только многопоточный и с различными улучшениями, направленными на повышение эффективности.
Вдобавок, он не пытается очищать память, когда затраченные ресурсы на сборку не приносят ощутимого результата, а вылетает с OOM gc overhead limit exceeded.
В данном тестировании этот сборщик показал себя не лучшим образом, зависая на очень долгое время под конец выполнения программы.
Очевидно, что данный сборщик требует явного указания числа доступных ему потоков(что справедливо и для G1), т.к. пытаясь использовать все имеющиеся, он лишь ухудшает собственную производительность.
Однако в реальных условиях и при грамотной настройке он может быть предпочтительнее G1 ввиду более редких пауз~~, обеспечивая большую пропускную способность~~.
